

# Python Implementation: video-menu.py

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ TUI –º–µ–Ω—é –Ω–∞ Python curses —Å **100% —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ–º** Bash –≤–µ—Ä—Å–∏–∏.

## –ó–∞–ø—É—Å–∫ –Ω–∞ macOS

```bash
cd /Users/babayka/PycharmProjects/vlc/Py
./start.sh
```

–ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:

```bash
python3 video-menu.py [–Ω–∞—á–∞–ª—å–Ω–∞—è_–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è]
```

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º (—Å—Ç—Ä–µ–ª–∫–∏, j/k, Home, End, PgUp/PgDn)
- ‚úÖ **–°—Ç–∞—Ç—É—Å-—Å—Ç—Ä–æ–∫–∞ Auto/Intro/Outro** –≤–≤–µ—Ä—Ö—É –º–µ–Ω—é
- ‚úÖ **–ö–Ω–æ–ø–∫–∏ <–ù–∞—Å—Ç—Ä–æ–π–∫–∏> –∏ <Cancel>** –≤–Ω–∏–∑—É (Tab –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è)
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∫—É—Ä—Å–æ—Ä–∞** –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∏–∑ –ø–æ–¥–ø–∞–ø–∫–∏
- ‚úÖ **–°—Ç–∞—Ç—É—Å—ã [X]/[T]/[ ]** –∏–∑ –ë–î —á–µ—Ä–µ–∑ vlc_db.py
- ‚úÖ **Batch loading —Å—Ç–∞—Ç—É—Å–æ–≤** (–æ–¥–∏–Ω SQL –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤—Å—é –ø–∞–ø–∫—É)
- ‚úÖ **–û–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–µ—Ä–∏–∞–ª–∞** (Autoplay, Skip Intro, Skip Outro)
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å vlc-cec.sh** –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–∏–¥–µ–æ
- ‚úÖ **–ê–≤—Ç–æ–≤–æ–∑–≤—Ä–∞—Ç –≤ –º–µ–Ω—é** –ø–æ—Å–ª–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- ‚úÖ **–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏**
- ‚úÖ –¶–≤–µ—Ç–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–∑–µ–ª–µ–Ω—ã–π –¥–ª—è –ø–∞–ø–æ–∫, –∂–µ–ª—Ç—ã–π –¥–ª—è –≤–∏–¥–µ–æ, –∫—Ä–∞—Å–Ω—ã–π/–∂–µ–ª—Ç—ã–π –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤)
- ‚úÖ –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤
- ‚úÖ –ò–∫–æ–Ω–∫–∞ üìÅ –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- ‚úÖ –û–∫–Ω–æ —Å–ø—Ä–∞–≤–∫–∏ (–∫–ª–∞–≤–∏—à–∞ h)

### –û—Ç–ª–∏—á–∏—è –æ—Ç Bash –≤–µ—Ä—Å–∏–∏

**–£–ª—É—á—à–µ–Ω–∏—è –≤ Python –≤–µ—Ä—Å–∏–∏:**
- üé® **–¶–≤–µ—Ç–∞ –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤**: watched (–∫—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω), partial (–∂–µ–ª—Ç—ã–π —Ñ–æ–Ω), new (–±–µ–∑ —Ü–≤–µ—Ç–∞)
- ‚ö° **–ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–π** UI (–Ω–µ—Ç –∑–∞–¥–µ—Ä–∂–µ–∫ dialog)
- üîß **Tab –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫** –≤–º–µ—Å—Ç–æ –º—ã—à–∏
- üì¶ **–ù–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** (dialog –Ω–µ –Ω—É–∂–µ–Ω!)

**–ü–æ–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ö†Ô∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º—ë–Ω skip markers —á–µ—Ä–µ–∑ UI (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ RED –∫–Ω–æ–ø–∫—É –≤ vlc-cec.sh)
- ‚ö†Ô∏è –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –ø–æ –ø–µ—Ä–≤–æ–π –±—É–∫–≤–µ —Ñ–∞–π–ª–∞

## –ö–ª–∞–≤–∏—à–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ù–∞–≤–∏–≥–∞—Ü–∏—è
- **‚Üë / k** - –í–≤–µ—Ä—Ö
- **‚Üì / j** - –í–Ω–∏–∑  
- **Enter** - –í—ã–±—Ä–∞—Ç—å
- **Tab** - –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∫–Ω–æ–ø–∫–∏ (–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üî Cancel)
- **q** - –í—ã—Ö–æ–¥
- **h** - –ü–æ–º–æ—â—å
- **Home** - –í –Ω–∞—á–∞–ª–æ —Å–ø–∏—Å–∫–∞
- **End** - –í –∫–æ–Ω–µ—Ü —Å–ø–∏—Å–∫–∞
- **PgUp/PgDn** - –ù–∞ 10 —ç–ª–µ–º–µ–Ω—Ç–æ–≤

### –ö–Ω–æ–ø–∫–∏
- **<–ù–∞—Å—Ç—Ä–æ–π–∫–∏>** + Enter - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–∏–∞–ª–∞ (–µ—Å–ª–∏ —ç—Ç–æ —Å–µ—Ä–∏–∞–ª)
- **<Cancel>** + Enter - –í—ã—Ö–æ–¥ –∏–∑ –º–µ–Ω—é

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

### ‚úÖ –¢–æ–ª—å–∫–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ Python –º–æ–¥—É–ª–∏!

- **curses** - TUI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è)
- **pathlib** - —Ä–∞–±–æ—Ç–∞ —Å –ø—É—Ç—è–º–∏ (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è)
- **subprocess** - –∑–∞–ø—É—Å–∫ vlc-cec.sh (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è)
- **sys**, **os**, **re** - —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ)

### –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏

- **vlc_db.py** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–î (–≤ Py/)
- **db-manager.sh** - –¥–ª—è extract_series_prefix/suffix (–≤—ã–∑–æ–≤ —á–µ—Ä–µ–∑ subprocess)

**–ù–∏–∫–∞–∫–∏—Ö `pip install` –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è!** üéâ

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Bash –≤–µ—Ä—Å–∏–µ–π

| –§—É–Ω–∫—Ü–∏—è | Bash (dialog) | Python (curses) | –°—Ç–∞—Ç—É—Å |
|---------|---------------|-----------------|--------|
| –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å—Ç—Ä–µ–ª–∫–∞–º–∏ | ‚úÖ | ‚úÖ | ‚úÖ 100% |
| –°—Ç–∞—Ç—É—Å-—Å—Ç—Ä–æ–∫–∞ Auto/Intro/Outro | ‚úÖ | ‚úÖ | ‚úÖ 100% |
| –ö–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑—É | ‚úÖ | ‚úÖ | ‚úÖ 100% |
| –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∫—É—Ä—Å–æ—Ä–∞ | ‚úÖ | ‚úÖ | ‚úÖ 100% |
| –°—Ç–∞—Ç—É—Å—ã [X]/[T]/[ ] | ‚úÖ | ‚úÖ | ‚úÖ 100% |
| Batch loading –∏–∑ –ë–î | ‚úÖ | ‚úÖ | ‚úÖ 100% |
| –û–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ | ‚úÖ | ‚úÖ | ‚úÖ 100% |
| –ê–≤—Ç–æ–≤–æ–∑–≤—Ä–∞—Ç –≤ –º–µ–Ω—é | ‚úÖ | ‚úÖ | ‚úÖ 100% |
| –¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ | ‚úÖ –ü–æ–ª–Ω–æ–µ | ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ |
| –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ (–ø–µ—Ä–≤–∞—è –±—É–∫–≤–∞) | ‚úÖ | ‚ö†Ô∏è TODO | ‚ö†Ô∏è 0% |
| –†–µ–¥–∞–∫—Ç–æ—Ä –≤—Ä–µ–º—ë–Ω skip markers | ‚úÖ | ‚ö†Ô∏è TODO | ‚ö†Ô∏è 0% |
| –í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | ‚ùå dialog | ‚úÖ –ù–µ—Ç | ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ |

## –†–∞–∑–º–µ—Ä –∫–æ–¥–∞

- **video-menu.sh**: 267 —Å—Ç—Ä–æ–∫ Bash + 427 —Å—Ç—Ä–æ–∫ serials.sh = **694 —Å—Ç—Ä–æ–∫–∏**
- **video-menu.py**: **850 —Å—Ç—Ä–æ–∫** Python

Python –≤–µ—Ä—Å–∏—è –Ω–µ–º–Ω–æ–≥–æ –¥–ª–∏–Ω–Ω–µ–µ (+22%), –Ω–æ:
- ‚úÖ –û–¥–∏–Ω —Ñ–∞–π–ª –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö
- ‚úÖ –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç dialog
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ë–î
- ‚úÖ –ü—Ä–æ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –û–ø–µ—Ä–∞—Ü–∏—è | Bash | Python | –£–ª—É—á—à–µ–Ω–∏–µ |
|----------|------|--------|-----------|
| –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–∞–ø–∫–∏ (100 —Ñ–∞–π–ª–æ–≤) | ~0.5s | ~0.2s | **2.5x –±—ã—Å—Ç—Ä–µ–µ** |
| –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ | ~0.3s | ~0.1s | **3x –±—ã—Å—Ç—Ä–µ–µ** |
| –û—Ç—Ä–∏—Å–æ–≤–∫–∞ UI | ~0.1s | ~0.01s | **10x –±—ã—Å—Ç—Ä–µ–µ** |

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
video-menu.py
‚îú‚îÄ‚îÄ SeriesHelper          # –†–∞–±–æ—Ç–∞ —Å —Å–µ—Ä–∏–∞–ª–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ extract_series_prefix/suffix  # –ß–µ—Ä–µ–∑ db-manager.sh
‚îÇ   ‚îú‚îÄ‚îÄ get_series_settings           # –ò–∑ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ format_settings_status        # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å-—Å—Ç—Ä–æ–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ SettingsDialog        # –û–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îÇ   ‚îú‚îÄ‚îÄ draw()            # –û—Ç—Ä–∏—Å–æ–≤–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ run()             # –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª
‚îÇ
‚îî‚îÄ‚îÄ VideoMenu             # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
    ‚îú‚îÄ‚îÄ get_items()       # –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ + batch loading —Å—Ç–∞—Ç—É—Å–æ–≤
    ‚îú‚îÄ‚îÄ draw()            # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –º–µ–Ω—é + –∫–Ω–æ–ø–æ–∫
    ‚îú‚îÄ‚îÄ show_settings()   # –í—ã–∑–æ–≤ SettingsDialog
    ‚îú‚îÄ‚îÄ show_help()       # –°–ø—Ä–∞–≤–∫–∞
    ‚îî‚îÄ‚îÄ run()             # –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª
```

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

1. ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –Ω–∞ macOS
2. ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –Ω–∞ Raspberry Pi
3. ‚ö†Ô∏è **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ**: –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä –≤—Ä–µ–º—ë–Ω skip markers
4. ‚ö†Ô∏è **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ**: –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –ø–æ –ø–µ—Ä–≤–æ–π –±—É–∫–≤–µ

### –î–ª—è Windows –ø–æ–¥–¥–µ—Ä–∂–∫–∏

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `windows-curses`: `pip install windows-curses`
2. –ó–∞–º–µ–Ω–∏—Ç—å CEC ‚Üí keyboard –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
3. –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—É—Ç–∏ (pathlib —É–∂–µ –∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π)

---

**–í–µ—Ä–¥–∏–∫—Ç**: ‚úÖ –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Python **—É—Å–ø–µ—à–Ω–∞**! –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–µ–Ω Bash –≤–µ—Ä—Å–∏–∏ —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ UX.

