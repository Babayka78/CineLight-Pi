# Python –∞–Ω–∞–ª–æ–≥–∏ dialog –¥–ª—è TUI –º–µ–Ω—é

## –ü—Ä–æ–±–ª–µ–º–∞

Bash `dialog` —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–µ—à–Ω–µ–π —É—Ç–∏–ª–∏—Ç—ã, Python curses —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è UI.

## –†–µ—à–µ–Ω–∏–µ: Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∏-–∞–Ω–∞–ª–æ–≥–∏ dialog

### 1. **pythondialog** ‚≠ê –õ—É—á—à–∏–π –≤—ã–±–æ—Ä –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏

**–ß—Ç–æ —ç—Ç–æ:** –ü—Ä—è–º–∞—è Python –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ Unix `dialog`

```bash
pip install pythondialog
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞** - API –ø–æ—á—Ç–∏ 1:1 —Å Bash dialog
- ‚úÖ **–í—Å–µ –≤–∏–¥–∂–µ—Ç—ã dialog** (menu, checklist, inputbox, msgbox)
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–Ω–æ–ø–∫–∏** OK/Cancel
- ‚úÖ **–ë—ã—Å—Ç—Ä–∞—è –º–∏–≥—Ä–∞—Ü–∏—è** —Å Bash

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –¢—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `dialog` (–Ω–æ –æ–Ω —É–∂–µ –µ—Å—Ç—å!)

**–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞:**

```python
from dialog import Dialog

d = Dialog(dialog="dialog")

# –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤
code, tag = d.menu(
    "–í—ã–±–æ—Ä –≤–∏–¥–µ–æ: /path/to/dir",
    choices=[
        ("file1.mp4", "[ ] 500M"),
        ("file2.mp4", "[X] 720M"),
        ("file3.mp4", "[T] 890M")
    ],
    extra_button=True,
    extra_label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
)

if code == d.OK:
    print(f"–í—ã–±—Ä–∞–Ω: {tag}")
elif code == d.EXTRA:
    # –ö–Ω–æ–ø–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
    show_settings()
```

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Bash:**

```bash
# Bash
dialog --menu "Title" 20 60 15 \
    "file1.mp4" "[ ] 500M" \
    "file2.mp4" "[X] 720M"

# Python pythondialog
d.menu("Title", choices=[
    ("file1.mp4", "[ ] 500M"),
    ("file2.mp4", "[X] 720M")
])
```

---

### 2. **npyscreen** - –ë–æ–ª–µ–µ –º–æ—â–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞

**–ß—Ç–æ —ç—Ç–æ:** –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è TUI –Ω–∞ curses

```bash
pip install npyscreen
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç dialog
- ‚úÖ –ë–æ–≥–∞—Ç—ã–π –Ω–∞–±–æ—Ä –≤–∏–¥–∂–µ—Ç–æ–≤
- ‚úÖ –§–æ—Ä–º—ã –∏ —ç–∫—Ä–∞–Ω—ã

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –ë–æ–ª—å—à–µ –∫–æ–¥–∞ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚ùå –î—Ä—É–≥–æ–π API (–Ω–µ —Å–æ–≤–º–µ—Å—Ç–∏–º —Å dialog)

---

### 3. **Textual** - –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è TUI (2024)

**–ß—Ç–æ —ç—Ç–æ:** Async-powered TUI —Å –≤–µ–±-–ø–æ–¥–æ–±–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏

```bash
pip install textual
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ 16.7 –º–ª–Ω —Ü–≤–µ—Ç–æ–≤
- ‚úÖ –ú—ã—à—å, –∞–Ω–∏–º–∞—Ü–∏–∏
- ‚úÖ CSS-–ø–æ–¥–æ–±–Ω–∞—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –û—á–µ–Ω—å —Å–≤–æ–±–æ–¥–Ω—ã–π –∫–æ–¥ –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –º–µ–Ω—é
- ‚ùå Overkill –¥–ª—è video-menu

---

### 4. **Urwid** - –ó—Ä–µ–ª–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞

```bash
pip install urwid
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è
- ‚úÖ –ú–æ—â–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –°–ª–æ–∂–Ω—ã–π API
- ‚ùå –ú–Ω–æ–≥–æ boilerplate –∫–æ–¥–∞

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

### –î–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞: **pythondialog** üéØ

**–ü–æ—á–µ–º—É:**

1. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** - –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Å Bash –Ω–∞ Python –∑–∞ 2-3 —á–∞—Å–∞
2. **dialog —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω** –Ω–∞ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ
3. **API 1:1** —Å Bash dialog
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–Ω–æ–ø–∫–∏** <–ù–∞—Å—Ç—Ä–æ–π–∫–∏> –∏ <Cancel>
5. **–°—Ç–∞—Ç—É—Å-—Å—Ç—Ä–æ–∫–∞** —á–µ—Ä–µ–∑ `backtitle`

---

## –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è video-menu –Ω–∞ pythondialog

**–ë—ã–ª–æ (Bash):**
```bash
dialog --backtitle "$settings_status" \
    --extra-button --extra-label "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" \
    --menu "$title" 20 120 15 \
    "${items[@]}"
```

**–°—Ç–∞–Ω–µ—Ç (Python):**
```python
from dialog import Dialog

d = Dialog(dialog="dialog", autowidgetsize=True)

# –°—Ç–∞—Ç—É—Å-—Å—Ç—Ä–æ–∫–∞
d.set_background_title(settings_status)

# –ú–µ–Ω—é
code, tag = d.menu(
    title,
    choices=items,
    extra_button=True,
    extra_label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
    height=20,
    width=120,
    menu_height=15
)

if code == d.OK:
    # –í—ã–±—Ä–∞–Ω —Ñ–∞–π–ª
    handle_selection(tag)
elif code == d.EXTRA:
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
    show_settings()
```

---

## –ú–∏–≥—Ä–∞—Ü–∏—è: Bash ‚Üí Python pythondialog

### –≠—Ç–∞–ø 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install pythondialog
# dialog —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —á–µ—Ä–µ–∑ brew/apt
```

### –≠—Ç–∞–ø 2: –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```python
#!/usr/bin/env python3
from dialog import Dialog
from pathlib import Path
from vlc_db import VlcDatabase

d = Dialog(dialog="dialog", autowidgetsize=True)
db = VlcDatabase()

def show_menu(current_dir):
    # –ü–æ–ª—É—á–∞–µ–º —Ñ–∞–π–ª—ã
    items = get_items(current_dir)
    
    # –°—Ç–∞—Ç—É—Å-—Å—Ç—Ä–æ–∫–∞
    settings = get_series_settings(current_dir)
    d.set_background_title(format_settings_status(settings))
    
    # –ú–µ–Ω—é
    code, tag = d.menu(
        f"–í—ã–±–æ—Ä –≤–∏–¥–µ–æ: {current_dir}",
        choices=items,
        extra_button=True,
        extra_label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
    )
    
    if code == d.OK:
        handle_selection(tag)
    elif code == d.EXTRA:
        show_settings_dialog()
```

### –≠—Ç–∞–ø 3: –ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞

–í—Å–µ 267 —Å—Ç—Ä–æ–∫ `video-menu.sh` ‚Üí ~150 —Å—Ç—Ä–æ–∫ Python!

---

## –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | curses (—Ç–µ–∫—É—â–∏–π) | pythondialog | npyscreen | textual |
|----------|------------------|--------------|-----------|---------|
| **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏** | ‚ùå –°–ª–æ–∂–Ω–æ | ‚úÖ –õ–µ–≥–∫–æ | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ | ‚ùå –°–ª–æ–∂–Ω–æ |
| **–ö–æ–¥ (—Å—Ç—Ä–æ–∫–∏)** | 850 | ~150 | ~300 | ~400 |
| **–í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** | –ù–µ—Ç | dialog | –ù–µ—Ç | –ù–µ—Ç |
| **–ö–Ω–æ–ø–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ | ‚ö†Ô∏è –ß–µ—Ä–µ–∑ —Ñ–æ—Ä–º—ã | ‚ö†Ô∏è –ß–µ—Ä–µ–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã |
| **API –∫–∞–∫ Bash** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç |
| **–í—Ä–µ–º—è –º–∏–≥—Ä–∞—Ü–∏–∏** | 8 —á–∞—Å–æ–≤ | 2-3 —á–∞—Å–∞ | 5-6 —á–∞—Å–æ–≤ | 10+ —á–∞—Å–æ–≤ |

---

## –í–µ—Ä–¥–∏–∫—Ç

‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ pythondialog** –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏

**–ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:**
1. `pip install pythondialog` (5 –º–∏–Ω—É—Ç)
2. –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å `video-menu.sh` ‚Üí `video-menu.py` (2 —á–∞—Å–∞)
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (30 –º–∏–Ω—É—Ç)
4. –ì–æ—Ç–æ–≤–æ! ‚ú®

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- üî• **–í 5 —Ä–∞–∑ –º–µ–Ω—å—à–µ –∫–æ–¥–∞** (150 vs 850 —Å—Ç—Ä–æ–∫)
- üöÄ **–†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ Bash –≤–µ—Ä—Å–∏—è**
- üéØ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–Ω–æ–ø–∫–∏ –∏ UI**
- ‚úÖ **–ù–µ—Ç —Ä—É—á–Ω–æ–≥–æ —Ä–∏—Å–æ–≤–∞–Ω–∏—è curses**

---

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

–•–æ—Ç–∏—Ç–µ —á—Ç–æ–±—ã —è –ø–µ—Ä–µ–ø–∏—Å–∞–ª `video-menu.py` –Ω–∞ pythondialog?
–≠—Ç–æ –±—É–¥–µ—Ç **–≤ —Ä–∞–∑—ã –ø—Ä–æ—â–µ** —á–µ–º —Ç–µ–∫—É—â–∞—è curses –≤–µ—Ä—Å–∏—è! üéâ
